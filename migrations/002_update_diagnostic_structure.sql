-- 002_update_diagnostic_structure.sql
-- Update diagnostic structure with Russian names and hierarchical flow

-- Add display_name column to scenarios
ALTER TABLE fsm_scenarios ADD COLUMN IF NOT EXISTS display_name TEXT;

-- Clear existing data to rebuild with new structure
TRUNCATE TABLE user_sessions CASCADE;
TRUNCATE TABLE fsm_steps CASCADE;
TRUNCATE TABLE fsm_scenarios CASCADE;

-- Reset sequences
ALTER SEQUENCE fsm_scenarios_id_seq RESTART WITH 1;
ALTER SEQUENCE fsm_steps_id_seq RESTART WITH 1;

-- Insert updated scenarios with Russian display names
INSERT INTO fsm_scenarios (name, display_name, trigger_keywords, description) VALUES
('diagnose_angle_grinder', '–£–≥–ª–æ–≤–∞—è —à–ª–∏—Ñ–æ–≤–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞', ARRAY['—É–≥–ª–æ–≤–∞—è —à–ª–∏—Ñ–æ–≤–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞', '–±–æ–ª–≥–∞—Ä–∫–∞', '—É—à–º', 'angle grinder'], '–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —É–≥–ª–æ–≤–æ–π —à–ª–∏—Ñ–æ–≤–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã'),
('diagnose_miter_saw', '–¢–æ—Ä—Ü–æ–≤–æ—á–Ω–∞—è –ø–∏–ª–∞', ARRAY['—Ç–æ—Ä—Ü–æ–≤–æ—á–Ω–∞—è –ø–∏–ª–∞', '—Ç–æ—Ä—Ü–æ–≤–∫–∞', 'miter saw'], '–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Ç–æ—Ä—Ü–æ–≤–æ—á–Ω–æ–π –ø–∏–ª—ã'),
('diagnose_jigsaw', '–≠–ª–µ–∫—Ç—Ä–æ–ª–æ–±–∑–∏–∫', ARRAY['—ç–ª–µ–∫—Ç—Ä–æ–ª–æ–±–∑–∏–∫', '–ª–æ–±–∑–∏–∫', 'jigsaw'], '–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —ç–ª–µ–∫—Ç—Ä–æ–ª–æ–±–∑–∏–∫–∞'),
('diagnose_cordless_drill', '–ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä–Ω—ã–π —à—É—Ä—É–ø–æ–≤—ë—Ä—Ç', ARRAY['–∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–Ω—ã–π —à—É—Ä—É–ø–æ–≤—ë—Ä—Ç', '—à—É—Ä—É–ø–æ–≤—ë—Ä—Ç', 'cordless screwdriver'], '–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–Ω–æ–≥–æ —à—É—Ä—É–ø–æ–≤—ë—Ä—Ç–∞'),
('diagnose_corded_lawnmower', '–ü—Ä–æ–≤–æ–¥–Ω–∞—è (—Å–µ—Ç–µ–≤–∞—è) –≥–∞–∑–æ–Ω–æ–∫–æ—Å–∏–ª–∫–∞', ARRAY['–ø—Ä–æ–≤–æ–¥–Ω–∞—è –≥–∞–∑–æ–Ω–æ–∫–æ—Å–∏–ª–∫–∞', '–≥–∞–∑–æ–Ω–æ–∫–æ—Å–∏–ª–∫–∞', 'lawn mower'], '–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–≤–æ–¥–Ω–æ–π –≥–∞–∑–æ–Ω–æ–∫–æ—Å–∏–ª–∫–∏');

-- Insert diagnostic steps for angle grinder
INSERT INTO fsm_steps (scenario_id, step_key, message, is_final, next_step_key) VALUES
-- Root state: diagnose_angle_grinder
(1, 'root', '–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —É–≥–ª–æ–≤–æ–π —à–ª–∏—Ñ–æ–≤–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É:', false, NULL),

-- no_power branch
(1, 'no_power', '–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

1. –ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä —Ä–∞–∑—Ä—è–∂–µ–Ω
2. –ó–∞–ª–∏–ø–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –ø—É—Å–∫–∞
3. –û–±—Ä—ã–≤ –ø—Ä–æ–≤–æ–¥–∞
4. –°–≥–æ—Ä–µ–ª –¥–≤–∏–≥–∞—Ç–µ–ª—å', false, 'no_power_action'),

(1, 'no_power_action', '–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:', false, NULL),

-- stopped_during_operation branch
(1, 'stopped_during_operation', '–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª–æ—Å—å –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

1. –ó–∞—â–∏—Ç–∞ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–∞ —Å—Ä–∞–±–æ—Ç–∞–ª–∞
2. –ü–æ–ª–Ω—ã–π —Ä–∞–∑—Ä—è–¥
3. –ü–µ—Ä–µ–≥—Ä–µ–≤ –¥–≤–∏–≥–∞—Ç–µ–ª—è
4. –ú–µ—Ö–∞–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–∫–ª–∏–Ω–∏–≤–∞–Ω–∏–µ
5. –ò–∑–Ω–æ—Å —É–≥–æ–ª—å–Ω—ã—Ö —â—ë—Ç–æ–∫
6. –ù–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç—å —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∏', false, 'stopped_action'),

(1, 'stopped_action', '–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:', false, NULL);

-- Terminal actions for angle grinder
INSERT INTO fsm_steps (scenario_id, step_key, message, is_final, next_step_key) VALUES
(1, 'charge_or_replace_battery', 'üîã –ó–∞—Ä—è–¥–∏—Ç—å –∏–ª–∏ –∑–∞–º–µ–Ω–∏—Ç—å –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä:

1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –∑–∞—Ä—è–¥–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
2. –î–æ–∂–¥–∏—Ç–µ—Å—å –ø–æ–ª–Ω–æ–π –∑–∞—Ä—è–¥–∫–∏ (–æ–±—ã—á–Ω–æ 1-2 —á–∞—Å–∞)
3. –ï—Å–ª–∏ –Ω–µ –∑–∞—Ä—è–∂–∞–µ—Ç—Å—è - –∑–∞–º–µ–Ω–∏—Ç–µ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä

–ü–æ—Å–ª–µ –∑–∞—Ä—è–¥–∫–∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç.', true, NULL),

(1, 'replace_trigger_button', 'üîò –ó–∞–º–µ–Ω–∏—Ç—å –∫–Ω–æ–ø–∫—É –ø—É—Å–∫–∞:

1. –†–∞–∑–±–µ—Ä–∏—Ç–µ –∫–æ—Ä–ø—É—Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
2. –ò–∑–≤–ª–µ–∫–∏—Ç–µ —Å—Ç–∞—Ä—É—é –∫–Ω–æ–ø–∫—É
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–æ–≤—É—é –∫–Ω–æ–ø–∫—É
4. –°–æ–±–µ—Ä–∏—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç

–ë—É–¥—å—Ç–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã —Å —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–º–∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏.', true, NULL),

(1, 'repair_internal_wiring', 'üîå –†–µ–º–æ–Ω—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –ø—Ä–æ–≤–æ–¥–∫–∏:

1. –†–∞–∑–±–µ—Ä–∏—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
2. –ù–∞–π–¥–∏—Ç–µ –º–µ—Å—Ç–æ –æ–±—Ä—ã–≤–∞ (—á–∞—Å—Ç–æ —É —Ä–∞–∑—ä—ë–º–∞ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–∞)
3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞–π–∫—É –∏–ª–∏ –∑–∞–º–µ–Ω–∏—Ç–µ –ø—Ä–æ–≤–æ–¥
4. –ò–∑–æ–ª–∏—Ä—É–π—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

–¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞–≤—ã–∫ –ø–∞–π–∫–∏.', true, NULL),

(1, 'refer_to_service_center', 'üè™ –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –≤ —Å–µ—Ä–≤–∏—Å–Ω—ã–π —Ü–µ–Ω—Ç—Ä:

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –¥–ª—è:
- –°–≥–æ—Ä–µ–≤—à–µ–≥–æ –¥–≤–∏–≥–∞—Ç–µ–ª—è
- –ù–µ–∏—Å–ø—Ä–∞–≤–Ω–æ–π —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∏
- –°–ª–æ–∂–Ω—ã—Ö –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∏—Ö –ø–æ–ª–æ–º–æ–∫

–í–æ–∑—å–º–∏—Ç–µ —Å —Å–æ–±–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∏ –∑–∞—Ä—è–¥–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ.', true, NULL),

(1, 'restart_after_protection_reset', 'üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ —Å–±—Ä–æ—Å–∞ –∑–∞—â–∏—Ç—ã:

1. –û—Ç–∫–ª—é—á–∏—Ç–µ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä
2. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã
3. –ü–æ–≤—Ç–æ—Ä–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä.', true, NULL),

(1, 'restart_after_cooling', '‚ùÑÔ∏è –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ –æ—Ö–ª–∞–∂–¥–µ–Ω–∏—è:

1. –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–ª—é—á–∏—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
2. –î–∞–π—Ç–µ –æ—Å—Ç—ã—Ç—å 15-30 –º–∏–Ω—É—Ç
3. –ü–æ–≤—Ç–æ—Ä–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å

–ò–∑–±–µ–≥–∞–π—Ç–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ.', true, NULL),

(1, 'repair_mechanical_drive', '‚öôÔ∏è –†–µ–º–æ–Ω—Ç –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–∏–≤–æ–¥–∞:

1. –†–∞–∑–±–µ—Ä–∏—Ç–µ —Ä–µ–¥—É–∫—Ç–æ—Ä
2. –û—Å–º–æ—Ç—Ä–∏—Ç–µ —à–µ—Å—Ç–µ—Ä–Ω–∏ –∏ –ø–æ–¥—à–∏–ø–Ω–∏–∫–∏
3. –ó–∞–º–µ–Ω–∏—Ç–µ –ø–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã–µ –¥–µ—Ç–∞–ª–∏
4. –°–º–∞–∂—å—Ç–µ –º–µ—Ö–∞–Ω–∏–∑–º

–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç.', true, NULL),

(1, 'replace_carbon_brushes', 'üñäÔ∏è –ó–∞–º–µ–Ω–∞ —É–≥–æ–ª—å–Ω—ã—Ö —â—ë—Ç–æ–∫:

1. –†–∞–∑–±–µ—Ä–∏—Ç–µ –∫–æ—Ä–ø—É—Å
2. –ò–∑–≤–ª–µ–∫–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ —â—ë—Ç–∫–∏
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–æ–≤—ã–µ —â—ë—Ç–∫–∏
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç —Å –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–æ–º

–©—ë—Ç–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º–∏.', true, NULL);

-- Insert diagnostic steps for miter saw
INSERT INTO fsm_steps (scenario_id, step_key, message, is_final, next_step_key) VALUES
-- Root state
(2, 'root', '–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Ç–æ—Ä—Ü–æ–≤–æ—á–Ω–æ–π –ø–∏–ª—ã. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É:', false, NULL),

-- no_power branch
(2, 'no_power', '–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

1. –ù–µ—Ç –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è
2. –û–±—Ä—ã–≤ –∫–∞–±–µ–ª—è
3. –ê–∫—Ç–∏–≤–Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—É—Å–∫–∞
4. –°–≥–æ—Ä–µ–ª –¥–≤–∏–≥–∞—Ç–µ–ª—å/–∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä', false, 'no_power_action'),

(2, 'no_power_action', '–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:', false, NULL),

-- motor_runs_no_blade_rotation branch
(2, 'motor_runs_no_blade_rotation', '–ú–æ—Ç–æ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –¥–∏—Å–∫ –Ω–µ –≤—Ä–∞—â–∞–µ—Ç—Å—è. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

1. –ö–ª–∏–Ω —à–ø–∏–Ω–¥–µ–ª—è
2. –û–±—Ä—ã–≤ —Ä–µ–º–Ω—è', false, 'motor_no_blade_action'),

(2, 'motor_no_blade_action', '–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:', false, NULL),

-- vibration_or_inaccurate_cut branch
(2, 'vibration_or_inaccurate_cut', '–í–∏–±—Ä–∞—Ü–∏—è –∏–ª–∏ –Ω–µ—Ç–æ—á–Ω—ã–π —Ä–µ–∑. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

1. –î–∏—Å–∫ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
2. –ü–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã–π –¥–∏—Å–∫
3. –õ—é—Ñ—Ç –≤–∞–ª–∞', false, 'vibration_action'),

(2, 'vibration_action', '–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:', false, NULL);

-- Terminal actions for miter saw
INSERT INTO fsm_steps (scenario_id, step_key, message, is_final, next_step_key) VALUES
(2, 'restore_power', 'üîå –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–¥–∞—á—É –ø–∏—Ç–∞–Ω–∏—è:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∏–ª–∫—É –∏ —Ä–æ–∑–µ—Ç–∫—É
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É–¥–ª–∏–Ω–∏—Ç–µ–ª—å (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º—É–ª—å—Ç–∏–º–µ—Ç—Ä –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–≤—Ç–æ–º–∞—Ç –∑–∞—â–∏—Ç—ã

–£–±–µ–¥–∏—Ç–µ—Å—å –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.', true, NULL),

(2, 'replace_power_cable', 'üîå –ó–∞–º–µ–Ω–∞ —Å–µ—Ç–µ–≤–æ–≥–æ –∫–∞–±–µ–ª—è:

1. –í–∏–∑—É–∞–ª—å–Ω—ã–π –æ—Å–º–æ—Ç—Ä –∫–∞–±–µ–ª—è –Ω–∞ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è
2. –ü—Ä–æ–∑–≤–æ–Ω–∫–∞ –∫–∞–±–µ–ª—è –º—É–ª—å—Ç–∏–º–µ—Ç—Ä–æ–º
3. –ó–∞–º–µ–Ω–∞ –ø–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω–æ–≥–æ —É—á–∞—Å—Ç–∫–∞
4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–æ–ª—è—Ü–∏–∏

–ß–∞—Å—Ç–æ –ø–æ–≤—Ä–µ–∂–¥–∞–µ—Ç—Å—è –≤ –º–µ—Å—Ç–µ –≤—Ö–æ–¥–∞ –≤ –∫–æ—Ä–ø—É—Å.', true, NULL),

(2, 'disable_safety_lock', 'üîí –û—Ç–∫–ª—é—á–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –ø—É—Å–∫–∞:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å–Ω—É—é –∫–Ω–æ–ø–∫—É
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∏–ª–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
3. –û–ø—É—Å—Ç–∏—Ç–µ –∑–∞—â–∏—Ç–Ω—ã–π –∫–æ–∂—É—Ö
4. –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ —Ä—É–∫–æ—è—Ç–∫—É

–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–π –∑–∞–ø—É—Å–∫.', true, NULL),

(2, 'repair_mechanical_drive', '‚öôÔ∏è –†–µ–º–æ–Ω—Ç –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–∏–≤–æ–¥–∞:

1. –†–∞–∑–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–≤–æ–¥–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º
2. –û—Å–º–æ—Ç—Ä–∏—Ç–µ —à–ø–∏–Ω–¥–µ–ª—å –∏ –ø–æ–¥—à–∏–ø–Ω–∏–∫–∏
3. –û—á–∏—Å—Ç–∏—Ç–µ –æ—Ç –æ–ø–∏–ª–æ–∫ –∏ –≥—Ä—è–∑–∏
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ–µ –≤—Ä–∞—â–µ–Ω–∏–µ

–†–µ–≥—É–ª—è—Ä–Ω–æ –æ—á–∏—â–∞–π—Ç–µ –æ—Ç –æ–ø–∏–ª–æ–∫.', true, NULL),

(2, 'replace_belt', 'üîß –ó–∞–º–µ–Ω–∞ —Ä–µ–º–Ω—è:

1. –†–∞–∑–±–µ—Ä–∏—Ç–µ –∑–∞—â–∏—Ç–Ω—ã–µ –∫–æ–∂—É—Ö–∏
2. –û—Å–º–æ—Ç—Ä–∏—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–µ–º–Ω—è
3. –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –Ω–æ–≤—ã–π —Ä–µ–º–µ–Ω—å –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Ç—è–∂–µ–Ω–∏–µ

–†–µ–º–µ–Ω—å –ø–µ—Ä–µ–¥–∞–µ—Ç –≤—Ä–∞—â–µ–Ω–∏–µ –æ—Ç –º–æ—Ç–æ—Ä–∞ –∫ –¥–∏—Å–∫—É.', true, NULL),

(2, 'reinstall_blade', '‚öôÔ∏è –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–∏—Å–∫–∞:

1. –û—Ç–∫–ª—é—á–∏—Ç–µ –ø–∏—Ç–∞–Ω–∏–µ
2. –û—Å–ª–∞–±—å—Ç–µ –∫—Ä–µ–ø–µ–∂–Ω—É—é –≥–∞–π–∫—É
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Å–∞–¥–æ—á–Ω–æ–µ –æ—Ç–≤–µ—Ä—Å—Ç–∏–µ –¥–∏—Å–∫–∞
4. –ó–∞—Ç—è–Ω–∏—Ç–µ –≥–∞–π–∫—É —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –º–æ–º–µ–Ω—Ç–æ–º

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–ª—é—á –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞.', true, NULL),

(2, 'install_new_blade', 'üî™ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤–æ–≥–æ –¥–∏—Å–∫–∞:

1. –í—ã–±–µ—Ä–∏—Ç–µ –¥–∏—Å–∫ –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ –¥–∏–∞–º–µ—Ç—Ä–∞ –∏ —Ç–∏–ø–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ –ø–æ—Å–∞–¥–æ—á–Ω–æ–≥–æ –æ—Ç–≤–µ—Ä—Å—Ç–∏—è
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–µ–π –∑—É–±—å–µ–≤
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫—É

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –¥–∏—Å–∫–∏.', true, NULL),

(2, 'repair_mechanical_drive_miter', '‚öôÔ∏è –†–µ–º–æ–Ω—Ç –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–æ–π —á–∞—Å—Ç–∏:

1. –û—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–∞–ª –∏ –ø–æ–¥—à–∏–ø–Ω–∏–∫–∏
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª—é—Ñ—Ç –≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è—Ö
3. –ó–∞–º–µ–Ω–∏—Ç–µ –∏–∑–Ω–æ—à–µ–Ω–Ω—ã–µ –ø–æ–¥—à–∏–ø–Ω–∏–∫–∏
4. –û—Ç—Ä–µ–≥—É–ª–∏—Ä—É–π—Ç–µ –º–µ—Ö–∞–Ω–∏–∑–º

–ú–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è —Ä–∞–∑–±–æ—Ä–∫–∞ –≤—Å–µ–≥–æ –º–µ—Ö–∞–Ω–∏–∑–º–∞.', true, NULL);

-- Insert diagnostic steps for jigsaw
INSERT INTO fsm_steps (scenario_id, step_key, message, is_final, next_step_key) VALUES
-- Root state
(3, 'root', '–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —ç–ª–µ–∫—Ç—Ä–æ–ª–æ–±–∑–∏–∫–∞. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É:', false, NULL),

-- no_power branch
(3, 'no_power', '–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

1. –ù–µ—Ç –ø–∏—Ç–∞–Ω–∏—è
2. –ù–µ–∏—Å–ø—Ä–∞–≤–Ω–∞ –∫–Ω–æ–ø–∫–∞
3. –û–±—Ä—ã–≤ –ø—Ä–æ–≤–æ–¥–∫–∏', false, 'no_power_action'),

(3, 'no_power_action', '–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:', false, NULL),

-- blade_not_moving branch
(3, 'blade_not_moving', '–ü–æ–ª–æ—Ç–Ω–æ –Ω–µ –¥–≤–∏–∂–µ—Ç—Å—è. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

1. –ü–æ–ª–æ—Ç–Ω–æ –Ω–µ –∑–∞–∂–∞—Ç–æ
2. –ü–æ–ª–æ–º–∫–∞ —à—Ç–æ–∫–∞/–∫—Ä–∏–≤–æ—à–∏–ø–∞', false, 'blade_not_moving_action'),

(3, 'blade_not_moving_action', '–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:', false, NULL),

-- excessive_vibration_or_drift branch
(3, 'excessive_vibration_or_drift', '–°–∏–ª—å–Ω–∞—è –≤–∏–±—Ä–∞—Ü–∏—è –∏–ª–∏ —É–≤–æ–¥. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

1. –¢—É–ø–æ–µ –ø–æ–ª–æ—Ç–Ω–æ
2. –ò–∑–Ω–æ—Å —Ä–æ–ª–∏–∫–æ–≤
3. –û—Å–ª–∞–±–ª–µ–Ω –∫–æ—Ä–ø—É—Å', false, 'vibration_drift_action'),

(3, 'vibration_drift_action', '–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:', false, NULL);

-- Terminal actions for jigsaw
INSERT INTO fsm_steps (scenario_id, step_key, message, is_final, next_step_key) VALUES
(3, 'restore_power', 'üîå –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–¥–∞—á—É –ø–∏—Ç–∞–Ω–∏—è:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–æ–∑–µ—Ç–∫—É –∏ –∫–∞–±–µ–ª—å
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –£–ó–û/–∞–≤—Ç–æ–º–∞—Ç –∑–∞—â–∏—Ç—ã
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥–æ–π –ø—Ä–∏–±–æ—Ä –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–æ–∑–µ—Ç–∫–∏

–£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–∏ —ç–ª–µ–∫—Ç—Ä–æ—Å–µ—Ç–∏.', true, NULL),

(3, 'replace_trigger_button', 'üîò –ó–∞–º–µ–Ω–∞ –∫–Ω–æ–ø–∫–∏ –ø—É—Å–∫–∞:

1. –†–∞–∑–±–µ—Ä–∏—Ç–µ –∫–æ—Ä–ø—É—Å –ª–æ–±–∑–∏–∫–∞
2. –ò–∑–≤–ª–µ–∫–∏—Ç–µ —Å—Ç–∞—Ä—É—é –∫–Ω–æ–ø–∫—É
3. –û—á–∏—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã –æ—Ç –ø—ã–ª–∏
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–æ–≤—É—é –∏–ª–∏ –æ—Ç—Ä–µ–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∫–Ω–æ–ø–∫—É

–ß–∞—Å—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –ø—Ä–æ—Å—Ç–∞—è —á–∏—Å—Ç–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤.', true, NULL),

(3, 'repair_internal_wiring', 'üîå –†–µ–º–æ–Ω—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –ø—Ä–æ–≤–æ–¥–∫–∏:

1. –†–∞–∑–±–µ—Ä–∏—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
2. –ù–∞–π–¥–∏—Ç–µ –º–µ—Å—Ç–æ –æ–±—Ä—ã–≤–∞ (–æ–±—ã—á–Ω–æ —É —Ä–∞–∑—ä–µ–º–∞ –ø–∏—Ç–∞–Ω–∏—è)
3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–∞–π–∫–æ–π
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–∑–æ–ª—è—Ü–∏—é –≤—Å–µ—Ö –ø—Ä–æ–≤–æ–¥–æ–≤

–í–∏–±—Ä–∞—Ü–∏—è —á–∞—Å—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç –æ–±—Ä—ã–≤—ã –ø—Ä–æ–≤–æ–¥–∫–∏.', true, NULL),

(3, 'correctly_install_blade', 'üî™ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–ª–æ—Ç–Ω–∞:

1. –û—Ç–∫–ª—é—á–∏—Ç–µ –ø–∏—Ç–∞–Ω–∏–µ
2. –û—Å–ª–∞–±—å—Ç–µ –∑–∞–∂–∏–º –ø–æ–ª–æ—Ç–Ω–∞
3. –í—Å—Ç–∞–≤—å—Ç–µ –ø–æ–ª–æ—Ç–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–æ–π
4. –ó–∞—Ç—è–Ω–∏—Ç–µ –∑–∞–∂–∏–º —Å –Ω—É–∂–Ω—ã–º —É—Å–∏–ª–∏–µ–º
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∏–∫—Å–∞—Ü–∏—é

–ü–æ–ª–æ—Ç–Ω–æ –¥–æ–ª–∂–Ω–æ –≤—Ö–æ–¥–∏—Ç—å —Å–≤–æ–±–æ–¥–Ω–æ –Ω–æ –±–µ–∑ –ª—é—Ñ—Ç–∞.', true, NULL),

(3, 'repair_reciprocating_mechanism', '‚öôÔ∏è –†–µ–º–æ–Ω—Ç –º–µ—Ö–∞–Ω–∏–∑–º–∞ –≤–æ–∑–≤—Ä–∞—Ç–Ω–æ-–ø–æ—Å—Ç—É–ø–∞—Ç–µ–ª—å–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è:

1. –†–∞–∑–±–µ—Ä–∏—Ç–µ –∫–æ—Ä–ø—É—Å –∏ –º–µ—Ö–∞–Ω–∏–∑–º
2. –û—Å–º–æ—Ç—Ä–∏—Ç–µ —à—Ç–æ–∫ –∏ –∫—Ä–∏–≤–æ—à–∏–ø
3. –ó–∞–º–µ–Ω–∏—Ç–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–µ –¥–µ—Ç–∞–ª–∏
4. –°–æ–±–µ—Ä–∏—Ç–µ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É

–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∏ –Ω–∞–≤—ã–∫–∏.', true, NULL),

(3, 'install_new_blade', 'üî™ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–ª–æ—Ç–Ω–∞:

1. –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª–æ—Ç–Ω–æ –ø–æ –º–∞—Ç–µ—Ä–∏–∞–ª—É –∏ —Ç–æ–ª—â–∏–Ω–µ
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Ç–∏–ø–∞ –∑–∞–∂–∏–º–∞
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —É–≥–ª–æ–º
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä—è–º–æ–ª–∏–Ω–µ–π–Ω–æ—Å—Ç—å –¥–≤–∏–∂–µ–Ω–∏—è

–ö–∞–∂–¥—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª —Ç—Ä–µ–±—É–µ—Ç —Å–≤–æ–µ–≥–æ —Ç–∏–ø–∞ –ø–æ–ª–æ—Ç–Ω–∞.', true, NULL),

(3, 'repair_mechanical_drive', '‚öôÔ∏è –†–µ–º–æ–Ω—Ç –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–æ–π —á–∞—Å—Ç–∏:

1. –û—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª—è—é—â–∏–µ —Ä–æ–ª–∏–∫–∏
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Ö –∏–∑–Ω–æ—Å –∏ –ª—é—Ñ—Ç
3. –ó–∞–º–µ–Ω–∏—Ç–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–µ —Ä–æ–ª–∏–∫–∏
4. –û—Ç—Ä–µ–≥—É–ª–∏—Ä—É–π—Ç–µ –º–µ—Ö–∞–Ω–∏–∑–º

–†–æ–ª–∏–∫–∏ –¥–æ–ª–∂–Ω—ã —Å–≤–æ–±–æ–¥–Ω–æ –≤—Ä–∞—â–∞—Ç—å—Å—è.', true, NULL),

(3, 'tighten_housing', 'üîß –ü–æ–¥—Ç—è–∂–∫–∞ –∫–æ—Ä–ø—É—Å–∞:

1. –û—Å–º–æ—Ç—Ä–∏—Ç–µ –≤—Å–µ –≤–∏–Ω—Ç—ã –∫—Ä–µ–ø–ª–µ–Ω–∏—è
2. –ü–æ–¥—Ç—è–Ω–∏—Ç–µ –æ—Å–ª–∞–±–ª–µ–Ω–Ω—ã–µ –≤–∏–Ω—Ç—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –∫–æ—Ä–ø—É—Å–∞
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –ø–æ—Å–ª–µ –ø–æ–¥—Ç—è–∂–∫–∏

–†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∑–∞—Ç—è–∂–∫—É –≤–∏–Ω—Ç–æ–≤.', true, NULL);

-- Insert diagnostic steps for cordless drill
INSERT INTO fsm_steps (scenario_id, step_key, message, is_final, next_step_key) VALUES
-- Root state
(4, 'root', '–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–Ω–æ–≥–æ —à—É—Ä—É–ø–æ–≤—ë—Ä—Ç–∞. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É:', false, NULL),

-- no_power branch
(4, 'no_power', '–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

1. –ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä —Ä–∞–∑—Ä—è–∂–µ–Ω
2. –ü–ª–æ—Ö–æ–π –∫–æ–Ω—Ç–∞–∫—Ç
3. –ù–µ–∏—Å–ø—Ä–∞–≤–Ω–∞ –∫–Ω–æ–ø–∫–∞', false, 'no_power_action'),

(4, 'no_power_action', '–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:', false, NULL),

-- spins_but_no_torque branch
(4, 'spins_but_no_torque', '–í—Ä–∞—â–∞–µ—Ç—Å—è, –Ω–æ –Ω–µ –∫—Ä—É—Ç–∏—Ç. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

1. –ú—É—Ñ—Ç–∞ –º–æ–º–µ–Ω—Ç–∞ —Å—Ä–∞–±–æ—Ç–∞–ª–∞
2. –ò–∑–Ω–æ—Å —à–µ—Å—Ç–µ—Ä—ë–Ω', false, 'spins_no_torque_action'),

(4, 'spins_no_torque_action', '–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:', false, NULL),

-- battery_drains_quickly branch
(4, 'battery_drains_quickly', '–ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä –±—ã—Å—Ç—Ä–æ —Å–∞–¥–∏—Ç—Å—è. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

1. –î–µ–≥—Ä–∞–¥–∞—Ü–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤
2. –ù–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç—å BMS', false, 'battery_drains_action'),

(4, 'battery_drains_action', '–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:', false, NULL);

-- Terminal actions for cordless drill
INSERT INTO fsm_steps (scenario_id, step_key, message, is_final, next_step_key) VALUES
(4, 'charge_or_replace_battery', 'üîã –ó–∞—Ä—è–¥–∫–∞ –∏–ª–∏ –∑–∞–º–µ–Ω–∞ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–∞:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —É—Ä–æ–≤–Ω—è –∑–∞—Ä—è–¥–∞
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –∫ –∑–∞—Ä—è–¥–Ω–æ–º—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É
3. –î–æ–∂–¥–∏—Ç–µ—Å—å –ø–æ–ª–Ω–æ–π –∑–∞—Ä—è–¥–∫–∏
4. –ï—Å–ª–∏ –Ω–µ –∑–∞—Ä—è–∂–∞–µ—Ç—Å—è - –∑–∞–º–µ–Ω–∏—Ç–µ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä—ã.', true, NULL),

(4, 'service_contact_group', 'üîå –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–Ω–æ–π –≥—Ä—É–ø–ø—ã:

1. –†–∞–∑–±–µ—Ä–∏—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–∞
2. –û—á–∏—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã –æ—Ç –æ–∫–∏—Å–ª–µ–Ω–∏—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä—É–∂–∏–Ω–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã
4. –°–æ–±–µ—Ä–∏—Ç–µ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç

–ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —á–∏—Å—Ç—ã–º–∏ –∏ —É–ø—Ä—É–≥–∏–º–∏.', true, NULL),

(4, 'replace_trigger_button', 'üîò –ó–∞–º–µ–Ω–∞ –∫–Ω–æ–ø–∫–∏ –ø—É—Å–∫–∞:

1. –†–∞–∑–±–µ—Ä–∏—Ç–µ –∫–æ—Ä–ø—É—Å
2. –ò–∑–≤–ª–µ–∫–∏—Ç–µ –∫–Ω–æ–ø–∫—É —Ä–µ–≤–µ—Ä—Å–∞/–ø—É—Å–∫–∞
3. –û—á–∏—Å—Ç–∏—Ç–µ –∏–ª–∏ –∑–∞–º–µ–Ω–∏—Ç–µ
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É

–ß–∞—Å—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç —á–∏—Å—Ç–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤.', true, NULL),

(4, 'adjust_torque_setting', '‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫—Ä—É—Ç—è—â–µ–≥–æ –º–æ–º–µ–Ω—Ç–∞:

1. –ù–∞–π–¥–∏—Ç–µ –∫–æ–ª—å—Ü–æ —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∫–∏ –º–æ–º–µ–Ω—Ç–∞
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–π –Ω–æ–º–µ—Ä
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞—Ç—è–Ω—É—Ç—å –∫—Ä–µ–ø–µ–∂
4. –ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –º—É—Ñ—Ç—É

–ú—É—Ñ—Ç–∞ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏.', true, NULL),

(4, 'repair_gearbox', '‚öôÔ∏è –†–µ–º–æ–Ω—Ç —Ä–µ–¥—É–∫—Ç–æ—Ä–∞:

1. –†–∞–∑–±–µ—Ä–∏—Ç–µ —Ä–µ–¥—É–∫—Ç–æ—Ä
2. –û—Å–º–æ—Ç—Ä–∏—Ç–µ —à–µ—Å—Ç–µ—Ä–Ω–∏ –Ω–∞ –∏–∑–Ω–æ—Å
3. –ó–∞–º–µ–Ω–∏—Ç–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–µ —à–µ—Å—Ç–µ—Ä–Ω–∏
4. –°–º–∞–∂—å—Ç–µ –º–µ—Ö–∞–Ω–∏–∑–º

–ß–∞—Å—Ç–æ –∏–∑–Ω–∞—à–∏–≤–∞—é—Ç—Å—è –ø–ª–∞—Å—Ç–∏–∫–æ–≤—ã–µ —à–µ—Å—Ç–µ—Ä–Ω–∏.', true, NULL),

(4, 'replace_battery_cells', 'üîã –ó–∞–º–µ–Ω–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–∞:

1. –†–∞–∑–±–µ—Ä–∏—Ç–µ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä
2. –ò–∑–º–µ—Ä—å—Ç–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ –∫–∞–∂–¥–æ–π —è—á–µ–π–∫–µ
3. –ó–∞–º–µ–Ω–∏—Ç–µ —Å–ª–∞–±—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
4. –°–æ–±–µ—Ä–∏—Ç–µ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ

–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ.', true, NULL),

(4, 'refer_to_service_center', 'üè™ –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –≤ —Å–µ—Ä–≤–∏—Å–Ω—ã–π —Ü–µ–Ω—Ç—Ä:

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:
- –ù–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–∏ BMS
- –°–ª–æ–∂–Ω—ã—Ö —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º
- –ó–∞–º–µ–Ω—ã —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–∞

BMS –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –∑–∞—Ä—è–¥/—Ä–∞–∑—Ä—è–¥ –±–∞—Ç–∞—Ä–µ–∏.', true, NULL);

-- Insert diagnostic steps for corded lawnmower
INSERT INTO fsm_steps (scenario_id, step_key, message, is_final, next_step_key) VALUES
-- Root state
(5, 'root', '–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–≤–æ–¥–Ω–æ–π –≥–∞–∑–æ–Ω–æ–∫–æ—Å–∏–ª–∫–∏. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É:', false, NULL),

-- no_power branch
(5, 'no_power', '–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

1. –ù–µ—Ç –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è
2. –û–±—Ä—ã–≤ –∫–∞–±–µ–ª—è
3. –°—Ä–∞–±–æ—Ç–∞–ª–∞ —Ç–µ—Ä–º–æ–∑–∞—â–∏—Ç–∞', false, 'no_power_action'),

(5, 'no_power_action', '–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:', false, NULL),

-- motor_runs_no_blade_rotation branch
(5, 'motor_runs_no_blade_rotation', '–ú–æ—Ç–æ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –Ω–æ–∂ –Ω–µ –≤—Ä–∞—â–∞–µ—Ç—Å—è. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

1. –ù–æ–∂ –∑–∞–∫–ª–∏–Ω–∏–ª–æ
2. –û–±—Ä—ã–≤ —Ä–µ–º–Ω—è
3. –ò–∑–Ω–æ—Å –ø–æ–¥—à–∏–ø–Ω–∏–∫–æ–≤', false, 'motor_no_blade_action'),

(5, 'motor_no_blade_action', '–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:', false, NULL),

-- uneven_cut_or_vibration branch
(5, 'uneven_cut_or_vibration', '–ù–µ—Ä–æ–≤–Ω—ã–π —Å—Ä–µ–∑ –∏–ª–∏ –≤–∏–±—Ä–∞—Ü–∏—è. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

1. –¢—É–ø–æ–π –Ω–æ–∂
2. –î–∏—Å–±–∞–ª–∞–Ω—Å –Ω–æ–∂–∞
3. –ù–µ—Ä–∞–≤–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –∫–æ–ª—ë—Å', false, 'uneven_cut_action'),

(5, 'uneven_cut_action', '–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:', false, NULL);

-- Terminal actions for corded lawnmower
INSERT INTO fsm_steps (scenario_id, step_key, message, is_final, next_step_key) VALUES
(5, 'restore_power', 'üîå –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–¥–∞—á—É –ø–∏—Ç–∞–Ω–∏—è:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–æ–∑–µ—Ç–∫—É –º—É–ª—å—Ç–∏–º–µ—Ç—Ä–æ–º
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –£–ó–û/–∞–≤—Ç–æ–º–∞—Ç –∑–∞—â–∏—Ç—ã
3. –û—Å–º–æ—Ç—Ä–∏—Ç–µ –∫–∞–±–µ–ª—å –Ω–∞ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

–£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–∏ —ç–ª–µ–∫—Ç—Ä–æ—Å–µ—Ç–∏.', true, NULL),

(5, 'replace_power_cable', 'üîå –ó–∞–º–µ–Ω–∞ —Å–µ—Ç–µ–≤–æ–≥–æ –∫–∞–±–µ–ª—è:

1. –û—Ç–∫–ª—é—á–∏—Ç–µ –æ—Ç —Å–µ—Ç–∏
2. –û—Å–º–æ—Ç—Ä–∏—Ç–µ –∫–∞–±–µ–ª—å –Ω–∞ –ø–µ—Ä–µ–≥–∏–±—ã –∏ –ø–µ—Ä–µ—Ç–∏—Ä–∞–Ω–∏—è
3. –ü—Ä–æ–∑–≤–æ–Ω–∏—Ç–µ –∫–∞–±–µ–ª—å
4. –ó–∞–º–µ–Ω–∏—Ç–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–π —É—á–∞—Å—Ç–æ–∫

–ö–∞–±–µ–ª—å —á–∞—Å—Ç–æ –ø–æ–≤—Ä–µ–∂–¥–∞–µ—Ç—Å—è –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ.', true, NULL),

(5, 'restart_after_cooling', '‚ùÑÔ∏è –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ –æ—Ö–ª–∞–∂–¥–µ–Ω–∏—è:

1. –û—Ç–∫–ª—é—á–∏—Ç–µ –∫–æ—Å–∏–ª–∫—É –æ—Ç —Å–µ—Ç–∏
2. –î–∞–π—Ç–µ –æ—Å—Ç—ã—Ç—å 20-30 –º–∏–Ω—É—Ç
3. –û—á–∏—Å—Ç–∏—Ç–µ –æ—Ç —Ç—Ä–∞–≤—ã –∏ –≥—Ä—è–∑–∏
4. –ü–æ–≤—Ç–æ—Ä–Ω–æ –≤–∫–ª—é—á–∏—Ç–µ

–¢–µ—Ä–º–æ–∑–∞—â–∏—Ç–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ –ø–µ—Ä–µ–≥—Ä–µ–≤–µ.', true, NULL),

(5, 'clear_working_area', 'üå± –û—á–∏—Å—Ç–∫–∞ —Ä–∞–±–æ—á–µ–π –∑–æ–Ω—ã:

1. –û—Ç–∫–ª—é—á–∏—Ç–µ –æ—Ç —Å–µ—Ç–∏
2. –û—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–æ–∂ –∏ –∑–∞—â–∏—Ç–Ω—ã–π –∫–æ–∂—É—Ö
3. –£–¥–∞–ª–∏—Ç–µ –Ω–∞–º–æ—Ç–∞–≤—à—É—é—Å—è —Ç—Ä–∞–≤—É, –≤–µ—Ç–∫–∏, –∫–∞–º–Ω–∏
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ–µ –≤—Ä–∞—â–µ–Ω–∏–µ –Ω–æ–∂–∞

–†–µ–≥—É–ª—è—Ä–Ω–æ –æ—á–∏—â–∞–π—Ç–µ –ø–æ—Å–ª–µ —Ä–∞–±–æ—Ç—ã.', true, NULL),

(5, 'replace_belt', 'üîß –ó–∞–º–µ–Ω–∞ —Ä–µ–º–Ω—è:

1. –†–∞–∑–±–µ—Ä–∏—Ç–µ –∑–∞—â–∏—Ç–Ω—ã–µ –∫–æ–∂—É—Ö–∏
2. –û—Å–º–æ—Ç—Ä–∏—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–µ–º–Ω—è
3. –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –Ω–æ–≤—ã–π —Ä–µ–º–µ–Ω—å
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Ç—è–∂–µ–Ω–∏–µ

–†–µ–º–µ–Ω—å –ø–µ—Ä–µ–¥–∞–µ—Ç –≤—Ä–∞—â–µ–Ω–∏–µ –æ—Ç –º–æ—Ç–æ—Ä–∞ –∫ –Ω–æ–∂—É.', true, NULL),

(5, 'repair_mechanical_drive', '‚öôÔ∏è –†–µ–º–æ–Ω—Ç –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–æ–π —á–∞—Å—Ç–∏:

1. –û—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–æ–¥—à–∏–ø–Ω–∏–∫–∏ –≤–∞–ª–∞
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ–µ –≤—Ä–∞—â–µ–Ω–∏–µ
3. –ó–∞–º–µ–Ω–∏—Ç–µ –∏–∑–Ω–æ—à–µ–Ω–Ω—ã–µ –ø–æ–¥—à–∏–ø–Ω–∏–∫–∏
4. –°–º–∞–∂—å—Ç–µ –º–µ—Ö–∞–Ω–∏–∑–º

–ü–æ–¥—à–∏–ø–Ω–∏–∫–∏ —Ç—Ä–µ–±—É—é—Ç —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è.', true, NULL),

(5, 'sharpen_or_replace_blade', 'üî™ –ó–∞—Ç–æ—á–∫–∞ –∏–ª–∏ –∑–∞–º–µ–Ω–∞ –Ω–æ–∂–∞:

1. –û—Ç–∫–ª—é—á–∏—Ç–µ –æ—Ç —Å–µ—Ç–∏
2. –°–Ω–∏–º–∏—Ç–µ –Ω–æ–∂
3. –ó–∞—Ç–æ—á–∏—Ç–µ –Ω–æ–∂ –∏–ª–∏ –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –Ω–æ–≤—ã–π
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –±–∞–ª–∞–Ω—Å–æ–º

–¢—É–ø–æ–π –Ω–æ–∂ —Ä–≤–µ—Ç —Ç—Ä–∞–≤—É –≤–º–µ—Å—Ç–æ —Å—Ç—Ä–∏–∂–∫–∏.', true, NULL),

(5, 'correctly_install_blade', '‚öñÔ∏è –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–∂–∞:

1. –°–Ω–∏–º–∏—Ç–µ –Ω–æ–∂
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫—É –Ω–∞ –ø–∞–ª—å—Ü–µ
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –º–æ–º–µ–Ω—Ç–æ–º –∑–∞—Ç—è–∂–∫–∏
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∏–±—Ä–∞—Ü–∏–∏

–ù–æ–∂ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω.', true, NULL),

(5, 'adjust_cutting_height', 'üìè –†–µ–≥—É–ª–∏—Ä–æ–≤–∫–∞ –≤—ã—Å–æ—Ç—ã –∫–æ—à–µ–Ω–∏—è:

1. –û—Å–º–æ—Ç—Ä–∏—Ç–µ –∫–æ–ª–µ—Å–∏–∫–∏
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –æ–¥–∏–Ω–∞–∫–æ–≤—É—é –≤—ã—Å–æ—Ç—É –≤—Å–µ—Ö –∫–æ–ª–µ—Å
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –Ω–∞ —Ä–æ–≤–Ω–æ–π –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏
4. –û—Ç—Ä–µ–≥—É–ª–∏—Ä—É–π—Ç–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

–ö–æ–ª–µ—Å–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞ –æ–¥–Ω–æ–º —É—Ä–æ–≤–Ω–µ.', true, NULL);
